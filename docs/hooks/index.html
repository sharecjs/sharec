
<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>
  Hooks | Sharec
</title>
    <meta charset='urf-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <meta name='description' content='Sharec – javascript configuration manager'>
    <meta property='og:type' content='website'>
    <meta property='og:url' content='https://sharec.js.org'>
    <meta property='og:site_name' content='Sharec'>
    <meta property='og:locale' content='en_US'>
    <meta property='og:title' content='Sharec'>
    <meta property='og:description' content='Sharec – javascript configuration manager'>
    <link rel='stylesheet' href='/assets/css/main.css'>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/github.min.css">
  </head>
  <body>
    <div class='min-h-screen pl-80'>
      <section class='flex flex-col w-80 h-full py-8 px-6 shadow fixed left-0 top-0 bg-white overflow-y-auto'>
        
          <a href='/'>
            <div class='flex justify-center items-center font-mono text-2xl mb-10 bg-gray-100 p-4 rounded shadow'>
  <img class='flex-0 w-8 mr-4' src='/assets/images/logo.svg' alt='Sharec logo' />
  Sharec
</div>

          </a>
        
        <nav class="flex flex-col rounded list-none text-lg h-full font-mono">
  
    <li class='mb-2 last:mb-0'>
      
        <a class='menu-link cursor-pointer' href='/'>Introduction</a>
      
    </li>
  
    <li class='mb-2 last:mb-0'>
      
        <a class='menu-link cursor-pointer' href='/docs/quick_start/'>Quick start</a>
      
    </li>
  
    <li class='mb-2 last:mb-0'>
      
        <a class='menu-link cursor-pointer' href='/docs/how_it_works/'>How it works</a>
      
    </li>
  
    <li class='mb-2 last:mb-0'>
      
        <p class='menu-link font-bold cursor-default'>Hooks</p>
      
    </li>
  
    <li class='mb-2 last:mb-0'>
      
        <a class='menu-link cursor-pointer' href='/docs/multi_configs/'>Multiple configurations</a>
      
    </li>
  
    <li class='mb-2 last:mb-0'>
      
        <a class='menu-link cursor-pointer' href='/docs/cli_api/'>CLI API</a>
      
    </li>
  
    <li class='mb-2 last:mb-0'>
      
        <a class='menu-link cursor-pointer' href='/docs/ready_examples/'>Ready examples</a>
      
    </li>
  
  <li class='mt-auto'>
    <a class='menu-link' href='https://github.com/sharecjs/sharec' target='_blank'>Github</a>
  </li>
</nav>

      </section>
      <section class='w-full min-h-screen bg-gray-100'>
        
  <div class='article px-8'>
    <h1>Hooks</h1>
<p>You can define your hooks in the runtime configuration finle. With hooks you can
customize any field in <code>FlowContext</code>.</p>
<p>Hook should match following signature:</p>
<pre><code class="language-ts">type FlowStep = (context: FlowContext) =&gt; Promise&lt;FlowContext&gt;
</code></pre>
<p>At this moment <code>sharec</code> supports two hooks: <code>beforeMerge</code> and <code>afterMerge</code>.</p>
<h2>Using hooks</h2>
<p>You can install and use any external hook:</p>
<pre><code class="language-js">const prettierHook = require('sharec-prettier-hook')

module.exports = {
  afterMerge: prettierHook,
}
</code></pre>
<h2>Writting your own hook</h2>
<p>Hooks authoring is very simple:</p>
<pre><code class="language-js">// .sharecrc.js
const { EOL } = require('os')

module.exports = {
  // here we're logging whole the context before `mergeConfigsPackages` step
  beforeMerge: async (context) =&gt; {
    console.log('Before merge hooks has been fired: ', context)
    return context
  },
  // in this step we're removing EOL from the all files
  afterMerge: async (context) =&gt; {
    const eolRe = new RegExp(`${EOL}$`)

    for (const config in context.mergedConfigs) {
      if (!eolRe.test(context.mergedConfigs[config])) continue

      context.mergedConfigs[config] = context.mergedConfigs[config].replace(eolRe, '')
    }

    return context
  },
}
</code></pre>
<h2>Official hooks</h2>
<ul>
<li><a href="https://github.com/sharecjs/sharec-editorconfig-hook"><code>sharec-editorconfig-hook</code></a> – applies formatting from <code>.editorconfig</code></li>
<li><a href="https://github.com/sharecjs/sharec-prettier-hook"><code>sharec-prettier-hook</code></a> – applies <code>prettier</code> formatting</li>
</ul>

  </div>

      </section>
    </div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
    <script>window.hljs.highlightAll();</script>
  </body>
</html>
